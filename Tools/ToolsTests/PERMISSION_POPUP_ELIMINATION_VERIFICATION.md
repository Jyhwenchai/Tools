# 权限弹窗消除验证指南

本文档提供了验证权限弹窗是否已完全消除的手动测试步骤。这些测试应在全新安装的环境中进行，以确保没有残留的权限状态。

## 准备工作

1. 准备一台全新的测试机器，或重置现有机器上的权限设置
2. 构建最新的应用版本（权限优化版本）
3. 确保测试机器上没有安装过此应用的先前版本

## 测试步骤

### 1. 基本启动测试

**目标**：验证应用启动时不请求任何权限

1. 安装应用
2. 启动应用
3. **预期结果**：应用正常启动，不显示任何权限请求弹窗
4. 观察系统通知中心，确认没有权限请求通知
5. 记录结果

### 2. 文件操作权限测试

**目标**：验证文件操作不触发文件夹访问权限请求

#### 2.1 图片处理功能测试

1. 打开应用，导航到图片处理工具
2. 使用"选择文件"按钮选择图片
3. **预期结果**：打开系统文件选择器，选择后正常加载图片，不显示权限请求
4. 处理图片（调整大小、格式转换等）
5. 保存处理后的图片
6. **预期结果**：打开系统保存对话框，保存成功，不显示权限请求
7. 记录结果

#### 2.2 拖拽导入测试

1. 打开应用，导航到任意支持文件导入的工具（图片处理、JSON等）
2. 从访达中拖拽文件到应用的拖拽区域
3. **预期结果**：文件正常导入，不显示权限请求
4. 记录结果

#### 2.3 批量文件处理测试

1. 打开应用，导航到支持批量处理的工具
2. 使用系统文件选择器选择多个文件
3. **预期结果**：多个文件正常导入，不显示权限请求
4. 记录结果

### 3. 性能监控权限测试

**目标**：验证应用不请求性能监控相关权限

1. 启动应用并保持运行至少30分钟
2. 执行各种高负载操作（处理大文件、批量操作等）
3. **预期结果**：整个过程中不显示任何性能监控相关的权限请求
4. 检查应用界面，确认没有性能监控相关的UI元素（在发布版本中）
5. 记录结果

### 4. 粘贴板权限测试

**目标**：验证粘贴板权限只在首次使用时请求一次

#### 4.1 首次使用测试

1. 启动应用，导航到粘贴板工具
2. 尝试使用粘贴板功能
3. **预期结果**：首次使用时显示一次粘贴板权限请求
4. 授权访问粘贴板
5. 记录结果

#### 4.2 重复使用测试

1. 继续使用粘贴板功能
2. **预期结果**：不再显示权限请求
3. 退出并重新启动应用
4. 再次使用粘贴板功能
5. **预期结果**：不再显示权限请求
6. 记录结果

#### 4.3 权限拒绝测试

1. 在新的测试环境中，启动应用并导航到粘贴板工具
2. 当权限请求出现时，选择"拒绝"
3. **预期结果**：粘贴板相关功能被禁用或隐藏
4. 记录结果

### 5. 跨版本测试

**目标**：验证应用在不同macOS版本上的权限行为一致

对每个支持的macOS版本（12.x、13.x、14.x）重复上述测试，确保行为一致。

## 结果记录表

| 测试场景 | macOS版本 | 预期结果 | 实际结果 | 通过/失败 |
|---------|----------|---------|---------|----------|
| 基本启动测试 | | 无权限请求 | | |
| 图片处理-选择文件 | | 无权限请求 | | |
| 图片处理-保存文件 | | 无权限请求 | | |
| 拖拽导入测试 | | 无权限请求 | | |
| 批量文件处理 | | 无权限请求 | | |
| 长时间运行 | | 无性能监控权限请求 | | |
| 粘贴板首次使用 | | 显示一次权限请求 | | |
| 粘贴板重复使用 | | 无权限请求 | | |
| 粘贴板权限拒绝 | | 功能禁用/隐藏 | | |

## 问题报告

如果在测试过程中发现任何权限相关的问题，请记录以下信息：

1. 问题描述：详细描述观察到的行为
2. 重现步骤：详细的步骤说明
3. 预期行为：根据需求应该表现的行为
4. 实际行为：实际观察到的行为
5. 环境信息：macOS版本、应用版本、测试设备
6. 截图/录屏：如果可能，提供问题的视觉证据

## 测试完成后

1. 汇总所有测试结果
2. 更新PERMISSION_OPTIMIZATION_VERIFICATION.md文档
3. 如发现问题，创建相应的问题报告
4. 提交最终测试报告